<!DOCTYPE html>
<html>
  <head>
    <title>window.Textbox.public_cmd.html 2015.11.14.13.35.10</title>
    <meta charset-"utf-8">
  </head>
  <body style="background-color:#000000;">
<div style='max-width: 850px;overflow:hidden; color: #d6d6d6;font-style: normal; font-weight: normal; text-decoration: none;'>
<pre><span style="color:#363250;">// COPYRIGHT &copy; 2015 Mark Robbins, all rights reserved</span>
<span>    </span><span style="color:#363250;">// Z_DOT cmd update_html():void ::Textbox::_ ::conceptboard::conceptboard_vpw::_tool::!mark::C::conceptboard.js  z.84149095009151301.2014.10.31.16.24.54.148|+!</span>
<span>      </span><span style="color:#b2b2b2;">Textbox</span><span style="color:#ff00ff;">.</span><span style="color:#2b2bff;">prototype</span><span style="color:#ff00ff;">.</span><span style="color:#b2b2b2;">update_html</span><span style="color:#ff00ff;">=</span><span style="color:#2b2bff;">function</span><span>()</span><span style="color:#708a53;">{</span>
<span>        </span><span style="color:#363250;">// data-&lt;attr&gt;</span>
<span>        </span><span style="color:#363250;">// data-index contains all attr names</span>
<span>        </span><span style="color:#363250;">// read the text</span>
<span>        </span><span style="color:#ff00ff;">var</span><span> </span><span style="color:#006200;">qo</span><span style="color:#ff00ff;">=</span><span style="color:#634880;">this</span><span style="color:#ff00ff;">.</span><span style="color:#006200;">qo</span><span style="color:#ff00ff;">;</span>
<span>        </span><span style="color:#ff00ff;">var</span><span> </span><span style="color:#b2b2b2;">ptb</span><span style="color:#ff00ff;">=</span><span style="color:#634880;">this</span><span style="color:#ff00ff;">.</span><span style="color:#3a7474;">meta</span><span>()</span><span style="color:#ff00ff;">;</span>
<span>        </span><span style="color:#363250;">//var keys=Object.keys(ptb);</span>
<span>        </span><span style="color:#ff00ff;">var</span><span> </span><span style="color:#b2b2b2;">attrs</span><span style="color:#ff00ff;">=</span><span style="color:#006200;">qo</span><span style="color:#ff00ff;">.</span><span style="color:#3a7474;">attr</span><span>(</span><span style="color:#7a7b62;">'data-index'</span><span>)</span><span style="color:#ff00ff;">||</span><span style="color:#7a7b62;">''</span><span style="color:#ff00ff;">;</span>
<span>        </span><span style="color:#b2b2b2;">attrs</span><span style="color:#ff00ff;">=</span><span style="color:#b2b2b2;">attrs</span><span style="color:#ff00ff;">.</span><span style="color:#2b2bff;">split</span><span>(</span><span style="color:#7a7b62;">''</span><span>)</span><span style="color:#ff00ff;">;</span>
<span>        </span><span style="color:#ff00ff;">var</span><span> </span><span style="color:#b2b2b2;">i</span><span>, </span><span style="color:#b2b2b2;">x</span><span>,</span><span style="color:#b2b2b2;">dat</span><span style="color:#ff00ff;">;</span>
<span>        </span><span style="color:#2b2bff;">for</span><span> (</span><span style="color:#b2b2b2;">x</span><span style="color:#ff00ff;">=</span><span style="color:#8080ff;">0</span><span style="color:#ff00ff;">;</span><span style="color:#b2b2b2;">x</span><span style="color:#ff00ff;">&lt;</span><span style="color:#b2b2b2;">attrs</span><span style="color:#ff00ff;">.</span><span style="color:#b2b2b2;">length</span><span style="color:#ff00ff;">;</span><span style="color:#b2b2b2;">x</span><span style="color:#ff00ff;">++</span><span>) </span><span style="color:#708a53;">{</span>
<span>          </span><span style="color:#b2b2b2;">i</span><span style="color:#ff00ff;">=</span><span style="color:#b2b2b2;">attrs</span><span style="color:#ff00ff;">[</span><span style="color:#b2b2b2;">x</span><span style="color:#ff00ff;">];</span>
<span>          </span><span style="color:#2b2bff;">if</span><span> (</span><span style="color:#b2b2b2;">i</span><span style="color:#ff00ff;">===</span><span style="color:#7a7b62;">'c'</span><span>) </span><span style="color:#708a53;">{</span><span style="color:#363250;">//classes</span>
<span>            </span><span style="color:#b2b2b2;">dat</span><span style="color:#ff00ff;">=</span><span style="color:#006200;">qo</span><span style="color:#ff00ff;">.</span><span style="color:#3a7474;">attr</span><span>(</span><span style="color:#7a7b62;">'data-c'</span><span>)</span><span style="color:#ff00ff;">;</span>
<span>            </span><span style="color:#2b2bff;">if</span><span> (</span><span style="color:#b2b2b2;">dat</span><span>) </span><span style="color:#708a53;">{</span>
<span>              </span><span style="color:#b2b2b2;">Textbox</span><span style="color:#ff00ff;">.</span><span style="color:#3a7474;">_remove_special_classes</span><span>(</span><span style="color:#006200;">qo</span><span>,</span><span style="color:#b2b2b2;">dat</span><span style="color:#ff00ff;">.</span><span style="color:#2b2bff;">split</span><span>(</span><span style="color:#7a7b62;">' '</span><span>))</span><span style="color:#ff00ff;">;</span>
<span>            </span><span style="color:#708a53;">}</span>
<span>          </span><span style="color:#708a53;">}</span>
<span>          </span><span style="color:#006200;">qo</span><span style="color:#ff00ff;">.</span><span style="color:#3a7474;">removeAttr</span><span>(</span><span style="color:#7a7b62;">'data-'</span><span style="color:#ff00ff;">+</span><span style="color:#b2b2b2;">i</span><span>)</span><span style="color:#ff00ff;">;</span>
<span>        </span><span style="color:#708a53;">}</span>
<span>        </span><span style="color:#006200;">qo</span><span style="color:#ff00ff;">.</span><span style="color:#3a7474;">removeAttr</span><span>(</span><span style="color:#7a7b62;">'data-index'</span><span>)</span><span style="color:#ff00ff;">;</span>
<span>        </span><span style="color:#ff00ff;">var</span><span> </span><span style="color:#b2b2b2;">aa</span><span style="color:#ff00ff;">=[];</span>
<span>        </span><span style="color:#2b2bff;">for</span><span> (</span><span style="color:#b2b2b2;">i</span><span> </span><span style="color:#2b2bff;">in</span><span> </span><span style="color:#b2b2b2;">ptb</span><span>) </span><span style="color:#708a53;">{</span>
<span>          </span><span style="color:#2b2bff;">if</span><span> (</span><span style="color:#ff00ff;">!</span><span style="color:#b2b2b2;">ptb</span><span style="color:#ff00ff;">.</span><span style="color:#3a7474;">hasOwnProperty</span><span>(</span><span style="color:#b2b2b2;">i</span><span>)) </span><span style="color:#708a53;">{</span>
<span>            </span><span style="color:#2b2bff;">continue</span><span style="color:#ff00ff;">;</span>
<span>          </span><span style="color:#708a53;">}</span>
<span>          </span><span style="color:#b2b2b2;">aa</span><span style="color:#ff00ff;">.</span><span style="color:#2b2bff;">push</span><span>(</span><span style="color:#b2b2b2;">i</span><span>)</span><span style="color:#ff00ff;">;</span>
<span>          </span><span style="color:#2b2bff;">if</span><span> (</span><span style="color:#b2b2b2;">i</span><span style="color:#ff00ff;">===</span><span style="color:#7a7b62;">'c'</span><span>) </span><span style="color:#708a53;">{</span>
<span>            </span><span style="color:#b2b2b2;">dat</span><span style="color:#ff00ff;">=</span><span style="color:#b2b2b2;">ptb</span><span style="color:#ff00ff;">[</span><span style="color:#b2b2b2;">i</span><span style="color:#ff00ff;">];</span>
<span>            </span><span style="color:#2b2bff;">if</span><span> (</span><span style="color:#b2b2b2;">dat</span><span>) </span><span style="color:#708a53;">{</span>
<span>              </span><span style="color:#b2b2b2;">Textbox</span><span style="color:#ff00ff;">.</span><span style="color:#3a7474;">_add_special_classes</span><span>(</span><span style="color:#006200;">qo</span><span>,</span><span style="color:#b2b2b2;">dat</span><span style="color:#ff00ff;">.</span><span style="color:#2b2bff;">split</span><span>(</span><span style="color:#7a7b62;">' '</span><span>))</span><span style="color:#ff00ff;">;</span>
<span>            </span><span style="color:#708a53;">}</span>
<span>          </span><span style="color:#708a53;">}</span>
<span>          </span><span style="color:#006200;">qo</span><span style="color:#ff00ff;">.</span><span style="color:#3a7474;">attr</span><span>(</span><span style="color:#7a7b62;">'data-'</span><span style="color:#ff00ff;">+</span><span style="color:#b2b2b2;">i</span><span>,</span><span style="color:#b2b2b2;">ptb</span><span style="color:#ff00ff;">[</span><span style="color:#b2b2b2;">i</span><span style="color:#ff00ff;">]</span><span>)</span><span style="color:#ff00ff;">;</span>
<span>        </span><span style="color:#708a53;">}</span>
<span>        </span><span style="color:#006200;">qo</span><span style="color:#ff00ff;">.</span><span style="color:#3a7474;">attr</span><span>(</span><span style="color:#7a7b62;">'data-index'</span><span>,</span><span style="color:#b2b2b2;">aa</span><span style="color:#ff00ff;">.</span><span style="color:#3a7474;">join</span><span>(</span><span style="color:#7a7b62;">' '</span><span>))</span><span style="color:#ff00ff;">;</span>
<span>        </span><span style="color:#708a53;">}</span><span style="color:#ff00ff;">;</span><span> </span><span style="color:#363250;">//-update_html</span>
<span>    </span><span style="color:#363250;">// Z_DOT cmd html_hides(force):void ::Textbox::_ ::conceptboard::conceptboard_vpw::_tool::!mark::C::conceptboard.js  z.27228295009151301.2014.10.31.16.28.02.272|+!</span>
<span>      </span><span style="color:#b2b2b2;">Textbox</span><span style="color:#ff00ff;">.</span><span style="color:#2b2bff;">prototype</span><span style="color:#ff00ff;">.</span><span style="color:#b2b2b2;">html_hides</span><span style="color:#ff00ff;">=</span><span style="color:#2b2bff;">function</span><span>(</span><span style="color:#b2b2b2;">force</span><span>)</span><span style="color:#708a53;">{</span>
<span>        </span><span style="color:#363250;">//if hidden bail</span>
<span>          </span><span style="color:#363250;">//console.log('html_hides:force:'+(force)+&quot;\n&quot;+this.innerContent());</span>
<span>        </span><span style="color:#363250;">// if no</span>
<span>        </span><span style="color:#2b2bff;">if</span><span> (</span><span style="color:#ff00ff;">!</span><span style="color:#b2b2b2;">force</span><span>) </span><span style="color:#708a53;">{</span>
<span>          </span><span style="color:#2b2bff;">if</span><span> (</span><span style="color:#634880;">this</span><span style="color:#ff00ff;">.</span><span style="color:#006200;">qo</span><span style="color:#ff00ff;">.</span><span style="color:#3a7474;">attr</span><span>(</span><span style="color:#7a7b62;">'data-markup'</span><span>)) </span><span style="color:#708a53;">{</span>
<span>            </span><span style="color:#2b2bff;">if</span><span> (</span><span style="color:#ff00ff;">!</span><span style="color:#634880;">this</span><span style="color:#ff00ff;">.</span><span style="color:#006200;">qo</span><span style="color:#ff00ff;">.</span><span style="color:#3a7474;">is</span><span>(</span><span style="color:#7a7b62;">'[data-isdirty]'</span><span>)) </span><span style="color:#708a53;">{</span>
<span>              </span><span style="color:#363250;">//console.log('not dirty - return');</span>
<span>              </span><span style="color:#ff00ff;">return;</span>
<span>            </span><span style="color:#708a53;">}</span>
<span>          </span><span style="color:#708a53;">}</span>
<span>        </span><span style="color:#708a53;">}</span>
<span>        </span><span style="color:#634880;">this</span><span style="color:#ff00ff;">.</span><span style="color:#006200;">qo</span><span style="color:#ff00ff;">.</span><span style="color:#3a7474;">removeAttr</span><span>(</span><span style="color:#7a7b62;">'data-isdirty'</span><span>)</span><span style="color:#ff00ff;">;</span>
<span>        </span><span style="color:#ff00ff;">var</span><span> </span><span style="color:#b2b2b2;">p</span><span style="color:#ff00ff;">=</span><span style="color:#634880;">this</span><span style="color:#ff00ff;">.</span><span style="color:#3a7474;">p</span><span>()</span><span style="color:#ff00ff;">;</span>
<span>        </span><span style="color:#ff00ff;">var</span><span> </span><span style="color:#b2b2b2;">contents</span><span style="color:#ff00ff;">=</span><span style="color:#b2b2b2;">p</span><span style="color:#ff00ff;">.</span><span style="color:#3a7474;">contents</span><span>()</span><span style="color:#ff00ff;">;</span>
<span>        </span><span style="color:#ff00ff;">var</span><span> </span><span style="color:#b2b2b2;">a</span><span style="color:#ff00ff;">=[];</span>
<span>        </span><span style="color:#ff00ff;">var</span><span> </span><span style="color:#b2b2b2;">b</span><span style="color:#ff00ff;">=[];</span>
<span>        </span><span style="color:#b2b2b2;">contents</span><span style="color:#ff00ff;">.each</span><span>(</span><span style="color:#2b2bff;">function</span><span>()</span><span style="color:#708a53;">{</span>
<span>          </span><span style="color:#2b2bff;">if</span><span> (</span><span style="color:#634880;">this</span><span style="color:#ff00ff;">.</span><span style="color:#b2b2b2;">nodeType</span><span style="color:#ff00ff;">===</span><span style="color:#8080ff;">3</span><span>) </span><span style="color:#708a53;">{</span>
<span>            </span><span style="color:#ff00ff;">var</span><span> </span><span style="color:#b2b2b2;">txt</span><span style="color:#ff00ff;">=</span><span style="color:#634880;">this</span><span style="color:#ff00ff;">.</span><span style="color:#b2b2b2;">nodeValue</span><span style="color:#ff00ff;">;</span>
<span>            </span><span style="color:#2b2bff;">if</span><span> (</span><span style="color:#b2b2b2;">txt</span><span style="color:#ff00ff;">.</span><span style="color:#b2b2b2;">length</span><span style="color:#ff00ff;">&gt;</span><span style="color:#8080ff;">0</span><span style="color:#ff00ff;">&amp;&amp;</span><span style="color:#b2b2b2;">txt</span><span style="color:#ff00ff;">.</span><span style="color:#3a7474;">substr</span><span>(</span><span style="color:#8080ff;">0</span><span>,</span><span style="color:#8080ff;">1</span><span>)</span><span style="color:#ff00ff;">===</span><span style="color:#7a7b62;">'#'</span><span>) </span><span style="color:#708a53;">{</span>
<span>              </span><span style="color:#b2b2b2;">a</span><span style="color:#ff00ff;">.</span><span style="color:#2b2bff;">push</span><span>(</span><span style="color:#634880;">this</span><span>)</span><span style="color:#ff00ff;">;</span>
<span>              </span><span style="color:#b2b2b2;">b</span><span style="color:#ff00ff;">.</span><span style="color:#2b2bff;">push</span><span>(</span><span style="color:#634880;">this</span><span style="color:#ff00ff;">.</span><span style="color:#b2b2b2;">nodeValue</span><span>)</span><span style="color:#ff00ff;">;</span>
<span>            </span><span style="color:#708a53;">}</span>
<span>          </span><span style="color:#708a53;">}</span>
<span>        </span><span style="color:#708a53;">}</span><span>)</span><span style="color:#ff00ff;">;</span>
<span>        </span><span style="color:#2b2bff;">for</span><span> (</span><span style="color:#ff00ff;">var</span><span> </span><span style="color:#b2b2b2;">x</span><span style="color:#ff00ff;">=</span><span style="color:#8080ff;">0</span><span style="color:#ff00ff;">;</span><span style="color:#b2b2b2;">x</span><span style="color:#ff00ff;">&lt;</span><span style="color:#b2b2b2;">a</span><span style="color:#ff00ff;">.</span><span style="color:#b2b2b2;">length</span><span style="color:#ff00ff;">;</span><span style="color:#b2b2b2;">x</span><span style="color:#ff00ff;">++</span><span>) </span><span style="color:#708a53;">{</span>
<span>          </span><span style="color:#ff00ff;">var</span><span> </span><span style="color:#b2b2b2;">nn</span><span style="color:#ff00ff;">=</span><span style="color:#b2b2b2;">a</span><span style="color:#ff00ff;">[</span><span style="color:#b2b2b2;">x</span><span style="color:#ff00ff;">].</span><span style="color:#b2b2b2;">nextSibling</span><span style="color:#ff00ff;">;</span>
<span>          </span><span style="color:#b2b2b2;">a</span><span style="color:#ff00ff;">[</span><span style="color:#b2b2b2;">x</span><span style="color:#ff00ff;">].</span><span style="color:#b2b2b2;">parentNode</span><span style="color:#ff00ff;">.</span><span style="color:#3a7474;">removeChild</span><span>(</span><span style="color:#b2b2b2;">a</span><span style="color:#ff00ff;">[</span><span style="color:#b2b2b2;">x</span><span style="color:#ff00ff;">]</span><span>)</span><span style="color:#ff00ff;">;</span>
<span>          </span><span style="color:#2b2bff;">if</span><span> (</span><span style="color:#b2b2b2;">nn</span><span style="color:#ff00ff;">!==</span><span style="color:#2b2bff;">null</span><span>) </span><span style="color:#708a53;">{</span>
<span>            </span><span style="color:#2b2bff;">if</span><span> (</span><span style="color:#b2b2b2;">nn</span><span style="color:#ff00ff;">.</span><span style="color:#b2b2b2;">nodeType</span><span style="color:#ff00ff;">==</span><span style="color:#8080ff;">1</span><span>) </span><span style="color:#708a53;">{</span>
<span>              </span><span style="color:#2b2bff;">if</span><span> (</span><span style="color:#b2b2b2;">nn</span><span style="color:#ff00ff;">.</span><span style="color:#b2b2b2;">tagName</span><span style="color:#ff00ff;">===</span><span style="color:#7a7b62;">'BR'</span><span>) </span><span style="color:#708a53;">{</span>
<span>                </span><span style="color:#b2b2b2;">nn</span><span style="color:#ff00ff;">.</span><span style="color:#b2b2b2;">parentNode</span><span style="color:#ff00ff;">.</span><span style="color:#3a7474;">removeChild</span><span>(</span><span style="color:#b2b2b2;">nn</span><span>)</span><span style="color:#ff00ff;">;</span>
<span>              </span><span style="color:#708a53;">}</span>
<span>            </span><span style="color:#708a53;">}</span>
<span>          </span><span style="color:#708a53;">}</span>
<span>        </span><span style="color:#708a53;">}</span>
<span>        </span><span style="color:#634880;">this</span><span style="color:#ff00ff;">.</span><span style="color:#006200;">qo</span><span style="color:#ff00ff;">.</span><span style="color:#3a7474;">attr</span><span>(</span><span style="color:#7a7b62;">'data-markup'</span><span>,</span><span style="color:#006200;">JSON</span><span style="color:#ff00ff;">.</span><span style="color:#3a7474;">stringify</span><span>(</span><span style="color:#b2b2b2;">b</span><span>))</span><span style="color:#ff00ff;">;</span>
<span>        </span><span style="color:#708a53;">}</span><span style="color:#ff00ff;">;</span><span> </span><span style="color:#363250;">//html_hides</span>
<span>    </span><span style="color:#363250;">// Z_DOT cmd edit():void ::Textbos::_ ::conceptboard.js z.25984531004251301.2014.11.04.03.45.48.952|+!</span>
<span>      </span><span style="color:#b2b2b2;">Textbox</span><span style="color:#ff00ff;">.</span><span style="color:#2b2bff;">prototype</span><span style="color:#ff00ff;">.</span><span style="color:#b2b2b2;">edit</span><span style="color:#ff00ff;">=</span><span style="color:#2b2bff;">function</span><span>()</span><span style="color:#708a53;">{</span>
<span>        </span><span style="color:#634880;">this</span><span style="color:#ff00ff;">.</span><span style="color:#006200;">qo</span><span style="color:#ff00ff;">.</span><span style="color:#3a7474;">find</span><span>(</span><span style="color:#7a7b62;">'.comment-edit-link'</span><span>)</span><span style="color:#ff00ff;">.</span><span style="color:#2b2bff;">click</span><span>()</span><span style="color:#ff00ff;">;</span>
<span>        </span><span style="color:#708a53;">}</span><span style="color:#ff00ff;">;</span><span> </span><span style="color:#363250;">//-edit</span>
</pre></div>
  </body>
</html>

